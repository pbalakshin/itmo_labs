\documentclass[11pt]{article}
\usepackage{lscape}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{graphicx}
\usepackage{grffile}
\usepackage{longtable}
\usepackage{graphicx}
\usepackage{wrapfig}
\usepackage{rotating}
\usepackage[normalem]{ulem}
\usepackage{amsmath}
\usepackage{textcomp}
\usepackage{amssymb}
\usepackage{capt-of}
\usepackage{hyperref}
\usepackage[T2A]{fontenc}
\usepackage[a4paper,left=3cm,top=2cm,right=1.5cm,bottom=2cm,marginparsep=7pt,marginparwidth=.6in]{geometry}
\usepackage{cmap}
\usepackage[russian]{babel}
\usepackage{fancyhdr}
\usepackage{xcolor}
\usepackage{minted}
\usepackage{color}
\usepackage{listings}
\definecolor{pblue}{rgb}{0.13,0.13,1}
\definecolor{pgreen}{rgb}{0,0.5,0}
\definecolor{pred}{rgb}{0.9,0,0}
\definecolor{pgrey}{rgb}{0.46,0.45,0.48}
\definecolor{gray}{rgb}{0.4,0.4,0.4}
\definecolor{darkblue}{rgb}{0.0,0.0,0.6}
\definecolor{cyan}{rgb}{0.0,0.6,0.6}
\usepackage{listings}
\usepackage{url}
\urlstyle{same}
\newcommand\purl[1]{\protect\url{#1}}
\lstset{
	extendedchars=\true,
	showspaces=false,
	showtabs=false,
	breaklines=true,
	showstringspaces=false,
	breakatwhitespace=true,
	commentstyle=\color{pgreen},
	keywordstyle=\color{pblue},
	stringstyle=\color{pred},
	basicstyle=\ttfamily,
	moredelim=[il][\textcolor{pgrey}]{$$},
	moredelim=[is][\textcolor{pgrey}]{\%\%}{\%\%}
}
\lstdefinelanguage{XML}
{
	morestring=[b]",
	morestring=[s]{>}{<},
	morecomment=[s]{<?}{?>},
	stringstyle=\color{black},
	identifierstyle=\color{darkblue},
	keywordstyle=\color{cyan},
	morekeywords={xmlns,version,type}% list your attributes here
}
\author{АВТОР}
\date{\today}
\title{}
\hypersetup{
 pdfauthor={АВТОР},
 pdftitle={},
 pdfkeywords={},
 pdfsubject={},
 pdfcreator={Emacs 26.1 (Org mode 9.1.9)}, 
 pdflang={Russian}}
\begin{document}
\thispagestyle{empty}
\begin{center}
\textbf{Национальный Исследовательский Университет ИТМО}\\
\textbf{Факультет Программной Инженерии и Компьютерной Техники}\\
\end{center}
\vspace{2em}
\begin{center}
\includegraphics[width=120px]{../../../itmo-logo.png}
\end{center}
\LARGE
\vspace{5em}
\begin{center}
\textbf{Вариант № 17}\\
\textbf{Лабораторная работа № 4}\\
\Large
\textbf{по дисциплине}\\
\LARGE
\textbf{\emph{'Информатика'}}\\
\end{center}
\vspace{11em}
\large
\begin{flushright}
\textbf{Выполнил:}\\
\textbf{Студент группы P3113}\\
\textbf{\emph{Куперштейн Дмитрий;} : 269359}\\
\textbf{Преподаватель:}\\
\textbf{\emph{Малышева Татьяна Алексеевна}}\\
\end{flushright}
\vspace{4em}
\large
\begin{center}
\textbf{Санкт-Петербург 2019 г.}
\end{center}
\pagebreak{}
\setcounter{tocdepth}{2}
\tableofcontents
\vspace{2em}
\pagebreak
\large
\section{Задание}
\begin{enumerate}
	\item Изучить форму Бэкуса-Наура.
	\item Изучить особенности языков разметки/форматов JSON, YAML, XML,
	PROTOBUF
	\item Понять устройство страницы с расписанием для своей группы:\\
		\texttt{http://www.ifmo.ru/ru/schedule/0/P3200/schedule.htm}
	\item Исходя из структуры расписания конкретного дня, сформировать
	файл с расписанием в формате, указанном в задании в качестве
	исходного.
	\item Написать программу на языке Python 3.x, которая бы осуществляла
	парсинг и конвертацию исходного файла в новый.
	\item Нельзя использовать готовые библиотеки, кроме re (регулярные
	выражения в Python) и библиотеки для загрузки XML-файлов.
	\item \underline{Необязательное задание для получения оценки «4» и «5»} (позволяет
	набрать от 75 до 89 процентов от максимального числа баллов БаРС
	за данную лабораторную):
	\begin{enumerate}
		\item Найти готовые библиотеки, осуществляющие аналогичный
		парсинг и конвертацию файлов.
		\item Сравнить полученные результаты и объяснить их
		сходство/различие.
	\end{enumerate}
	\item \underline{Необязательное задание для получения оценки «5»} (позволяет набрать
	от 90 до 100 процентов от максимального числа баллов БаРС за
	данную лабораторную):
	\begin{enumerate}
		\item Используя свою программу и найденные готовые
		библиотеки, сравнить десятикратное время выполнения
		парсинга + конвертации в цикле.
		\item Проанализировать полученные результаты и объяснить их
		сходство/различие.
	\end{enumerate}
	\item Проверить, что все пункты задания выполнены и выполнены верно.
	\item Написать отчёт о проделанной работе.
	\item Подготовиться к устным вопросам на защите.
\end{enumerate}
Согласно варианту 17 необходимо распимание на среду в формате XML конвертировать в YAML.
\pagebreak
\large
\section{Исходный фаил}
\subsection{schedule.xml}
\inputminted{xml}{../schedule.xml}
\pagebreak
\section{Результат}
\subsection{schedule.yaml}
\inputminted{yaml}{../schedule.yaml}
\pagebreak{}
\section{Исходный код программы}
\subsection{\texttt{inf\_lab4.py}}
\inputminted{python}{../inf_lab4.py}
\subsection{\texttt{xml\_lexer.py}}
\inputminted{python}{../xml_lexer.py}
\subsection{\texttt{xml\_parse.py}}
\inputminted{python}{../xml_parser.py}
\section{Необязательно задание 1}
Для примера я приведу сравнения результата работы моей программы с библиотекой \texttt{xmlplain}, которая осуществляет парсинг и конвертацию XML файла в YAML, а также с совместной работой библотек \texttt{xmltodict}, которая осуществляет парсинг XML файла, и библиотеки \texttt{PyYAML}, c помощью которой результат можно сохранить в формате YAML.
\subsection{\texttt{xmlplain}}
Код, использующийся с сравнения с библиотекой \texttt{xmlplain}:
\subsubsection{\texttt{xmlplain\_test.py}}
\inputminted{python}{../xmlplain_test.py}
Результат:
\subsubsection{\texttt{schedule\_xmlplain.yaml}}
\inputminted{yaml}{../schedule_xmlplain.yaml}
\subsubsection{Вывод}
Результирующий файл, созданный библиотекой \texttt{xmlplain} схож с результатом моей программы, но испульзуется другой формат записи в YAML аттрибутов XML элементов:\\\\
Формат моей программы:
\inputminted{yaml}{../my_attrs_format.yaml}
~\\
Формат библиотеки \texttt{xmlplain}:
\inputminted{yaml}{../xmlplain_attrs_format.yaml}
\subsection{\texttt{xmltodict} и \texttt{PyYAML}}
Код, использующийся с сравнения с результатом работы библиотек \texttt{xmltodict} и \texttt{PyYAML}:
\subsubsection{ \texttt{xmltodict\_test.py}}
\inputminted{python}{../xmltodict_test.py}
~\\Результат:
\inputminted{yaml}{../schedule_xmltodict.yaml}
\subsubsection{Вывод}
Результат работы библиотек \texttt{xmltodict} и \texttt{PyYAML} совпадает с результатом \texttt{xmlplain}, за исключеним того, что \texttt{xmlplain} не распологает пункты в алфавитном порядке.
\subsection{Вывод}
Библиотека \texttt{xmlplain} и библиотеки \texttt{xmltodict} и \texttt{PyYAML} в результате своей работы дают схожий с моим результат,
но другим потём решают проблемы отсутвия аттрибутов у разделов в YAML.
\section{Необязательное задание 2}
Для сравнения 10-ти кратной времени работы моей программы и сторонних библиотек использовался следующий код:
\subsubsection{ \texttt{test\_libs.py}}
\inputminted{python}{../test_libs.py}
\subsubsection{ Результаты}
\texttt{xmlplain}:  0.0249 с\\
\texttt{xmltodict}:  0.0179 с\\
\texttt{my own lib}:  0.0040 с\\\\
При анализе кода библиотеки \texttt{xmlplain} я понял, что классы, в которые парсится XML, в ней создаются каждый раз при парсинге, это занимает лишнее время.Так же \texttt{xmlplain} и \texttt{xmltodict} - событийные парсеры (SAX), они способны обрабатывать большие XML файлы потребляя мало памяти, но на их разработку требуютеся больше усилий и парсинг занимает больше времени, что отражается на результатах. Мой парсер близок к модели DOM, непригодной для парсинга больших файлов (из-за необходимости выделения памяти для всего дерева элементов) и работающий быстрее.
\section{Вывод}
\large
В ходе этой лабораторной работы я реализовал парсинг XML файлов через абстрактое дерево (модель DOM) и вывод дерева в YAML  формате. Сравнил свой парсер с другими. Так же я изучил форму  Бэкуса-Наура и особенности многочисленных языков разметки.
\end{document}